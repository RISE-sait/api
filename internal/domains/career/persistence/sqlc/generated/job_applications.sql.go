// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: job_applications.sql

package db_career

import (
	"context"
	"database/sql"

	"github.com/google/uuid"
)

const createJobApplication = `-- name: CreateJobApplication :one
INSERT INTO careers.job_applications (
    job_id, first_name, last_name, email, phone,
    resume_url, cover_letter, linkedin_url, portfolio_url
) VALUES (
    $1, $2, $3, $4, $5,
    $6, $7, $8, $9
)
RETURNING id, job_id, first_name, last_name, email, phone, resume_url, cover_letter, linkedin_url, portfolio_url, status, internal_notes, rating, reviewed_by, created_at, updated_at
`

type CreateJobApplicationParams struct {
	JobID        uuid.UUID      `json:"job_id"`
	FirstName    string         `json:"first_name"`
	LastName     string         `json:"last_name"`
	Email        string         `json:"email"`
	Phone        sql.NullString `json:"phone"`
	ResumeUrl    string         `json:"resume_url"`
	CoverLetter  sql.NullString `json:"cover_letter"`
	LinkedinUrl  sql.NullString `json:"linkedin_url"`
	PortfolioUrl sql.NullString `json:"portfolio_url"`
}

func (q *Queries) CreateJobApplication(ctx context.Context, arg CreateJobApplicationParams) (CareersJobApplication, error) {
	row := q.db.QueryRowContext(ctx, createJobApplication,
		arg.JobID,
		arg.FirstName,
		arg.LastName,
		arg.Email,
		arg.Phone,
		arg.ResumeUrl,
		arg.CoverLetter,
		arg.LinkedinUrl,
		arg.PortfolioUrl,
	)
	var i CareersJobApplication
	err := row.Scan(
		&i.ID,
		&i.JobID,
		&i.FirstName,
		&i.LastName,
		&i.Email,
		&i.Phone,
		&i.ResumeUrl,
		&i.CoverLetter,
		&i.LinkedinUrl,
		&i.PortfolioUrl,
		&i.Status,
		&i.InternalNotes,
		&i.Rating,
		&i.ReviewedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getJobApplicationById = `-- name: GetJobApplicationById :one
SELECT id, job_id, first_name, last_name, email, phone, resume_url, cover_letter, linkedin_url, portfolio_url, status, internal_notes, rating, reviewed_by, created_at, updated_at FROM careers.job_applications WHERE id = $1
`

func (q *Queries) GetJobApplicationById(ctx context.Context, id uuid.UUID) (CareersJobApplication, error) {
	row := q.db.QueryRowContext(ctx, getJobApplicationById, id)
	var i CareersJobApplication
	err := row.Scan(
		&i.ID,
		&i.JobID,
		&i.FirstName,
		&i.LastName,
		&i.Email,
		&i.Phone,
		&i.ResumeUrl,
		&i.CoverLetter,
		&i.LinkedinUrl,
		&i.PortfolioUrl,
		&i.Status,
		&i.InternalNotes,
		&i.Rating,
		&i.ReviewedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listAllJobApplications = `-- name: ListAllJobApplications :many
SELECT id, job_id, first_name, last_name, email, phone, resume_url, cover_letter, linkedin_url, portfolio_url, status, internal_notes, rating, reviewed_by, created_at, updated_at FROM careers.job_applications
ORDER BY created_at DESC
`

func (q *Queries) ListAllJobApplications(ctx context.Context) ([]CareersJobApplication, error) {
	rows, err := q.db.QueryContext(ctx, listAllJobApplications)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []CareersJobApplication
	for rows.Next() {
		var i CareersJobApplication
		if err := rows.Scan(
			&i.ID,
			&i.JobID,
			&i.FirstName,
			&i.LastName,
			&i.Email,
			&i.Phone,
			&i.ResumeUrl,
			&i.CoverLetter,
			&i.LinkedinUrl,
			&i.PortfolioUrl,
			&i.Status,
			&i.InternalNotes,
			&i.Rating,
			&i.ReviewedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listJobApplicationsByJobId = `-- name: ListJobApplicationsByJobId :many
SELECT id, job_id, first_name, last_name, email, phone, resume_url, cover_letter, linkedin_url, portfolio_url, status, internal_notes, rating, reviewed_by, created_at, updated_at FROM careers.job_applications
WHERE job_id = $1
ORDER BY created_at DESC
`

func (q *Queries) ListJobApplicationsByJobId(ctx context.Context, jobID uuid.UUID) ([]CareersJobApplication, error) {
	rows, err := q.db.QueryContext(ctx, listJobApplicationsByJobId, jobID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []CareersJobApplication
	for rows.Next() {
		var i CareersJobApplication
		if err := rows.Scan(
			&i.ID,
			&i.JobID,
			&i.FirstName,
			&i.LastName,
			&i.Email,
			&i.Phone,
			&i.ResumeUrl,
			&i.CoverLetter,
			&i.LinkedinUrl,
			&i.PortfolioUrl,
			&i.Status,
			&i.InternalNotes,
			&i.Rating,
			&i.ReviewedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateJobApplicationNotes = `-- name: UpdateJobApplicationNotes :one
UPDATE careers.job_applications SET
    internal_notes = $2
WHERE id = $1
RETURNING id, job_id, first_name, last_name, email, phone, resume_url, cover_letter, linkedin_url, portfolio_url, status, internal_notes, rating, reviewed_by, created_at, updated_at
`

type UpdateJobApplicationNotesParams struct {
	ID            uuid.UUID      `json:"id"`
	InternalNotes sql.NullString `json:"internal_notes"`
}

func (q *Queries) UpdateJobApplicationNotes(ctx context.Context, arg UpdateJobApplicationNotesParams) (CareersJobApplication, error) {
	row := q.db.QueryRowContext(ctx, updateJobApplicationNotes, arg.ID, arg.InternalNotes)
	var i CareersJobApplication
	err := row.Scan(
		&i.ID,
		&i.JobID,
		&i.FirstName,
		&i.LastName,
		&i.Email,
		&i.Phone,
		&i.ResumeUrl,
		&i.CoverLetter,
		&i.LinkedinUrl,
		&i.PortfolioUrl,
		&i.Status,
		&i.InternalNotes,
		&i.Rating,
		&i.ReviewedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateJobApplicationRating = `-- name: UpdateJobApplicationRating :one
UPDATE careers.job_applications SET
    rating = $2
WHERE id = $1
RETURNING id, job_id, first_name, last_name, email, phone, resume_url, cover_letter, linkedin_url, portfolio_url, status, internal_notes, rating, reviewed_by, created_at, updated_at
`

type UpdateJobApplicationRatingParams struct {
	ID     uuid.UUID     `json:"id"`
	Rating sql.NullInt32 `json:"rating"`
}

func (q *Queries) UpdateJobApplicationRating(ctx context.Context, arg UpdateJobApplicationRatingParams) (CareersJobApplication, error) {
	row := q.db.QueryRowContext(ctx, updateJobApplicationRating, arg.ID, arg.Rating)
	var i CareersJobApplication
	err := row.Scan(
		&i.ID,
		&i.JobID,
		&i.FirstName,
		&i.LastName,
		&i.Email,
		&i.Phone,
		&i.ResumeUrl,
		&i.CoverLetter,
		&i.LinkedinUrl,
		&i.PortfolioUrl,
		&i.Status,
		&i.InternalNotes,
		&i.Rating,
		&i.ReviewedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateJobApplicationStatus = `-- name: UpdateJobApplicationStatus :one
UPDATE careers.job_applications SET
    status = $2,
    reviewed_by = $3
WHERE id = $1
RETURNING id, job_id, first_name, last_name, email, phone, resume_url, cover_letter, linkedin_url, portfolio_url, status, internal_notes, rating, reviewed_by, created_at, updated_at
`

type UpdateJobApplicationStatusParams struct {
	ID         uuid.UUID     `json:"id"`
	Status     string        `json:"status"`
	ReviewedBy uuid.NullUUID `json:"reviewed_by"`
}

func (q *Queries) UpdateJobApplicationStatus(ctx context.Context, arg UpdateJobApplicationStatusParams) (CareersJobApplication, error) {
	row := q.db.QueryRowContext(ctx, updateJobApplicationStatus, arg.ID, arg.Status, arg.ReviewedBy)
	var i CareersJobApplication
	err := row.Scan(
		&i.ID,
		&i.JobID,
		&i.FirstName,
		&i.LastName,
		&i.Email,
		&i.Phone,
		&i.ResumeUrl,
		&i.CoverLetter,
		&i.LinkedinUrl,
		&i.PortfolioUrl,
		&i.Status,
		&i.InternalNotes,
		&i.Rating,
		&i.ReviewedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
